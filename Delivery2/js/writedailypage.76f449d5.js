(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["writedailypage"],{"065e":function(t,e,a){},"0d8c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home_editBox_content"},[a("div",{staticClass:"ruleForm"},[a("div",{staticClass:"formItem"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"项目组",placeholder:"请选择"},on:{click:function(e){t.showPickerTeam=!0}},model:{value:t.projectTeam,callback:function(e){t.projectTeam=e},expression:"projectTeam"}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPickerTeam,callback:function(e){t.showPickerTeam=e},expression:"showPickerTeam"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.teamSelectsChild},on:{cancel:function(e){t.showPickerTeam=!1},confirm:t.onConfirmTeam}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.commiShow,expression:"commiShow"}],staticClass:"formItem"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"任务",name:"1"},scopedSlots:t._u([{key:"value",fn:function(){return[t._v(" "+t._s(t.commision)+" ")]},proxy:!0}])},t._l(t.commiList,(function(e,i){return a("div",{key:i},[a("div",[a("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("van-cell",{attrs:{title:e,clickable:""},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:i},on:{click:function(e){return t.getRadioIndex(i)}}})]},proxy:!0}],null,!0)})],1)],1)])})),0)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dailyShow,expression:"dailyShow"}],staticClass:"formItem"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"工时",placeholder:"请选择"},on:{click:function(e){t.showPickerHour=!0}},model:{value:t.workHour,callback:function(e){t.workHour=e},expression:"workHour"}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPickerHour,callback:function(e){t.showPickerHour=e},expression:"showPickerHour"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.hourSelects},on:{cancel:function(e){t.showPickerHour=!1},confirm:t.onConfirmHour}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.dailyShow,expression:"!dailyShow"}]},[a("div",{staticClass:"formItem box_frame-row"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"开始时间",placeholder:"请选择"},on:{click:function(e){t.startTimeHM=!0}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.startTimeHM,callback:function(e){t.startTimeHM=e},expression:"startTimeHM"}},[a("van-datetime-picker",{attrs:{type:"time",title:" "},on:{cancel:function(e){t.startTimeHM=!1},confirm:t.onConfirmStartHM},model:{value:t.currentStart,callback:function(e){t.currentStart=e},expression:"currentStart"}})],1)],1),a("div",{staticClass:"formItem"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"结束时间",placeholder:"请选择"},on:{click:function(e){t.endTimeHM=!0}},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.endTimeHM,callback:function(e){t.endTimeHM=e},expression:"endTimeHM"}},[a("van-datetime-picker",{attrs:{type:"time",title:" "},on:{cancel:function(e){t.endTimeHM=!1},confirm:t.onConfirmEndHM},model:{value:t.currentEnd,callback:function(e){t.currentEnd=e},expression:"currentEnd"}})],1)],1)]),a("div",{staticClass:"formItem"},[a("div",{staticClass:"workTitle"},[t._v("今日工作")]),a("van-field",{staticClass:"textareaEdit",staticStyle:{height:"4.5rem","text-align":"left"},attrs:{rows:"2",type:"textarea",placeholder:"请输入工作内容(最少10个字)"},model:{value:t.workContent,callback:function(e){t.workContent=e},expression:"workContent"}})],1)])])])},o=[],n={name:"WorkInfo",props:["daily","teamSelects","teamList","testData"],data:function(){return{projectTeam:"",showPickerTeam:!1,teamSelectsChild:this.teamSelects,teamListChild:this.teamList,workHour:"",showPickerHour:!1,hourSelects:["2小时","4小时","6小时","8小时"],activeNames:["0"],commiList:[],radio:0,commision:"",workContent:"",show:!0,dailyShow:"",startTime:"",startTimeHM:!1,currentStart:"18:30",currentEnd:"21:30",endTime:"",endTimeHM:!1,projectId:"",taskList:[],taskId:"",commiShow:!1,testDataGet:""}},methods:{onConfirmTeam:function(t,e){var a=this;this.projectId=this.teamList[e],this.projectTeam=t,this.showPickerTeam=!1,this.requestAxios({url:"/businessTask/taskList",data:{productId:this.projectId},method:"post"}).then((function(t){t.data.list.length>0&&(a.commiShow=!0,Array.prototype.forEach.call(t.data.list,(function(t){a.commiList.push(t.taskName),a.taskList.push(t.taskId)})),a.radio=0,a.commision=a.commiList[0],a.taskId=a.taskList[0])})).catch((function(){}))},getRadioIndex:function(t){this.commision=this.commiList[t],this.taskId=this.taskList[t]},onConfirmHour:function(t){this.workHour=t,this.showPickerHour=!1},onConfirmStartHM:function(t){this.startTime=t,this.startTimeHM=!1},onConfirmEndHM:function(t){this.endTime=t,this.endTimeHM=!1},sendFlag:function(t){return this.flagToParent=t,this.flagToParent}},mounted:function(){this.testDataGet=this.testData,this.dailyShow=this.daily}},s=n,r=(a("5851"),a("2877")),c=Object(r["a"])(s,i,o,!1,null,"027c8aaa",null);e["a"]=c.exports},5851:function(t,e,a){"use strict";a("5e81")},"5e81":function(t,e,a){},a434:function(t,e,a){"use strict";var i=a("23e7"),o=a("23cb"),n=a("a691"),s=a("50c4"),r=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),m=d("splice"),u=Math.max,h=Math.min,f=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var a,i,d,m,v,k,w=r(this),T=s(w.length),b=o(t,T),x=arguments.length;if(0===x?a=i=0:1===x?(a=0,i=T-b):(a=x-2,i=h(u(n(e),0),T-b)),T+a-i>f)throw TypeError(p);for(d=c(w,i),m=0;m<i;m++)v=b+m,v in w&&l(d,m,w[v]);if(d.length=i,a<i){for(m=b;m<T-i;m++)v=m+i,k=m+a,v in w?w[k]=w[v]:delete w[k];for(m=T;m>T-i+a;m--)delete w[m-1]}else if(a>i)for(m=T-i;m>b;m--)v=m+i-1,k=m+a-1,v in w?w[k]=w[v]:delete w[k];for(m=0;m<a;m++)w[m+b]=arguments[m+2];return w.length=T-i+a,d}})},ecbb:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("nav-bar-top",{attrs:{title:"写日报"}}),a("div",{staticClass:"home"},[a("div",{staticClass:"home_editBox"},[a("div",{staticClass:"home_editBox_time box_frame-row"},[a("div",[t._v("填写日期")]),a("div",{staticClass:"edit_date"},[a("van-field",{staticClass:"getTime",attrs:{"is-link":"",readonly:"",label:""},on:{click:function(e){t.startTimePop=!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.startTimePop,callback:function(e){t.startTimePop=e},expression:"startTimePop"}},[a("van-datetime-picker",{attrs:{type:"month-day",title:" ","max-date":t.maxDate},on:{confirm:t.onConfirmEndTime,cancel:function(e){t.startTimePop=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)]),t._l(t.editList,(function(e,i){return a("work-info",{key:e.id,ref:"child",refInFor:!0,attrs:{testData:e.id,daily:t.daily,teamSelects:t.teamSelects,teamList:t.teamList},nativeOn:{touchstart:function(e){return t.touchinUk(i)},touchend:function(e){return t.cleartime(i)}}})})),a("div",{staticClass:"home_editBox_iconAdd",on:{click:t.addeditbox}},[a("svg-icon",{staticClass:"iconBig",attrs:{iconClass:"tianjia"}})],1)],2)]),a("div",{staticClass:"submit_btn"},[a("div",{staticClass:"sendBtn",on:{click:t.sendData}},[t._v("提交日报")])])],1)},o=[],n=(a("99af"),a("a434"),a("065e"),a("22ff")),s=a("0032"),r=a("0d8c"),c=a("8521"),l="".concat((new Date).getMonth()+1,"月").concat((new Date).getDate(),"日"),d=0,m={components:{SvgIcon:s["a"],WorkInfo:r["a"]},name:"WriteDaily",data:function(){return{editList:[{id:0}],startDate:l,Loop:"",startTimePop:!1,maxDate:new Date,currentDate:new Date,teamSelects:[],teamList:[],sendDate:"",daily:!0}},methods:{getProject:function(){var t=this;this.requestAxios({url:"/businessProduct/listAll",method:"post"}).then((function(e){e.success?e.data&&Array.prototype.forEach.call(e.data,(function(e){t.teamSelects.push(e.productName),t.teamList.push(e.productId)})):Object(n["a"])(c["a"],{},{content:'<div style="text-align:center">'.concat(e.message,'</div>\n                          <div style="text-align:center">请重新登陆！</div>\n                        '),showBtn:!0})})).catch((function(){}))},formatDate:function(t){return"".concat(t.getMonth()+1,"月").concat(t.getDate(),"日")},formatDateSend:function(t){var e=parseInt(t.getMonth()+1,10)<10?"0".concat(t.getMonth()+1):t.getMonth()+1,a=parseInt(t.getDate(),10)<10?"0".concat(t.getDate()):t.getDate(),i=(new Date).getFullYear();return"".concat(i,"-").concat(e,"-").concat(a)},onConfirmEndTime:function(t){this.startTimePop=!1,this.startDate="".concat(this.formatDate(t)),this.sendDate="".concat(this.formatDateSend(t)),this.weekdayshow="星期".concat("日一二三四五六".charAt(t.getDay()))},addeditbox:function(){d+=1,this.editList.push({id:d})},sendData:function(){var t=this,e=[],a=0;Array.prototype.forEach.call(this.$refs.child,(function(t){var i=parseInt(t.workHour.substring(0,1),10);a+=i;var o={};o.taskId=parseInt(t.taskId,10),o.taskName=t.commision,o.projectId=t.projectId,o.projectName=t.projectTeam,o.workerLength=parseInt(t.workHour.substring(0,1),10),o.workerInfo=t.workContent,e.push(o)})),a<8?Object(n["a"])(c["a"],{},{content:'<div style="text-align:center">填写工时不足8小时，请检查工时</div>\n                    ',showBtn:!1}):a>8?Object(n["a"])(c["a"],{},{content:'<div style="text-align:center">填写工时已超 8 小时,请检查工时</div>\n                    ',showBtn:!1}):this.requestAxios({url:"/workDaily/save",data:{workDate:this.sendDate,dailyDetailList:e},method:"post"}).then((function(e){e.success?t.$router.push({path:"/ApplyEnd",query:{pageend:0}}):Object(n["a"])(c["a"],{},{content:'<div style="text-align:center">'.concat(e.message,'</div>\n                          <div style="text-align:center;margin-top:.5rem">请重新提交！</div>\n                          '),showBtn:!1})})).catch((function(){}))},touchinUk:function(t){var e=this;clearInterval(this.Loop),this.Loop=setTimeout((function(){e.$dialog.confirm({message:"是否删除?"}).then((function(){e.editList.splice(t,1)})).catch((function(){}))}),1e3)},cleartime:function(){clearInterval(this.Loop)}},mounted:function(){this.getProject(),this.sendDate=this.formatDateSend(new Date)},watch:{}},u=m,h=a("2877"),f=Object(h["a"])(u,i,o,!1,null,null,null);e["default"]=f.exports}}]);