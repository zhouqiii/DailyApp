(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["seedailypage"],{2043:function(t,e,a){},"4ffc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("nav-bar-top",{attrs:{title:"日报"},on:{rightClick:t.showTime},scopedSlots:t._u([{key:"right",fn:function(){return[a("svg-icon",{attrs:{iconClass:"timelou"}})]},proxy:!0}])}),a("div",{staticClass:"home"},[a("van-pull-refresh",{on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(e){return[a("svg-icon",{style:{transform:"scale("+e.distance/80+")"},attrs:{iconClass:"Loading"}}),a("span",{staticClass:"refresh_text"},[t._v("加载")])]}},{key:"loosing",fn:function(){return[a("svg-icon",{attrs:{iconClass:"Loading"}}),a("span",{staticClass:"refresh_text"},[t._v("加载")])]},proxy:!0},{key:"loading",fn:function(){return[a("svg-icon",{attrs:{iconClass:"shuaxin"}}),a("span",{staticClass:"refresh_text"},[t._v("刷新")])]},proxy:!0}]),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("div",{staticClass:"home_padd"},t._l(t.commiList,(function(e,n){return a("div",{key:n,staticClass:"daily_seebox",on:{click:function(e){return t.routeItem("/DailyDetail",n)}}},[a("div",{staticClass:"daily_seedate"},[t._v(" "+t._s(e.workDate)+" "+t._s(e.time))]),a("div",{staticClass:"daily_seecontent"},[a("div",{staticClass:"box_frame-row"},[a("span",{staticClass:"daily_seecontent_week"},[t._v("填报日期:"+t._s(e.workDate))]),a("span",{staticClass:"daily_seecontent_state"},[t._v(t._s(e.status))])]),a("div",{staticClass:"text textEllipsis",staticStyle:{width:"90%"}},[t._v("任务："+t._s(e.taskName))]),a("div",{staticClass:"text textEllipsis",staticStyle:{width:"90%"}},[t._v(" 今日工作："+t._s(e.workerInfo)+" ")])])])})),0)]),a("div",{staticClass:"home_pop"},[a("van-popup",{style:{width:"80%",height:"100%",background:"#d3d3d3"},attrs:{position:"right","get-container":".contentBox"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"contentBox"},[a("div",{staticClass:"ruleForm"},[a("div",{staticClass:"formItem"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"开始时间",placeholder:"请选择"},on:{click:function(e){t.startTimePop=!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.startTimePop,callback:function(e){t.startTimePop=e},expression:"startTimePop"}},[a("van-datetime-picker",{attrs:{type:"date","max-date":t.maxDate,title:" "},on:{cancel:function(e){t.startTimePop=!1},confirm:t.onConfirmStartTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1),a("div",{staticClass:"formItem"},[a("van-field",{attrs:{"is-link":"",readonly:"",label:"结束时间",placeholder:"请选择"},on:{click:function(e){t.endTimePop=!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.endTimePop,callback:function(e){t.endTimePop=e},expression:"endTimePop"}},[a("van-datetime-picker",{attrs:{type:"date","max-date":t.maxDate,title:" "},on:{cancel:function(e){t.endTimePop=!1},confirm:t.onConfirmEndTime},model:{value:t.currentDateEnd,callback:function(e){t.currentDateEnd=e},expression:"currentDateEnd"}})],1)],1)]),a("div",{staticClass:"timeSelect_btn flex_evenly"},[a("div",{staticClass:"timeSelect_btn_cancel",on:{click:function(e){t.show=!1}}},[t._v("取消")]),a("div",{staticClass:"timeSelect_btn_confirm",on:{click:t.getSelectComm}},[t._v("确认")])])])])],1),a("div",{staticClass:"home_edit box_frame"},[a("div",[a("svg-icon",{attrs:{iconClass:"bu"},on:{click:function(e){return t.routeItem("/WriteDaily")}}})],1)])],1)],1)},i=[],s=(a("99af"),a("ac1f"),a("1276"),a("0032")),o=(a("2043"),0),c="",r="",l={components:{SvgIcon:s["a"]},name:"SeeDaily",data:function(){return{commiList:[],isLoading:!1,show:!1,startDate:"",endDate:"",currentDate:new Date,currentDateEnd:new Date,maxDate:new Date,startTimePop:!1,endTimePop:!1}},methods:{getListData:function(t,e){var a=this;o+=1,this.requestAxios({url:"/workDaily/getListByPage",data:{pageNum:o,pageSize:5,startDate:t,endDate:e},method:"post"}).then((function(t){t.data.list&&Array.prototype.forEach.call(t.data.list,(function(t){"0"===t.status&&a.$set(t,"status","已提交"),t.workDate&&a.$set(t,"workDate",a.formatDateShow(t.workDate)),a.commiList.push(t)}))})).catch((function(){}))},showTime:function(){this.show=!0},formatDateSend:function(t){var e=parseInt(t.getMonth()+1,10)<10?"0".concat(t.getMonth()+1):t.getMonth()+1,a=parseInt(t.getDate(),10)<10?"0".concat(t.getDate()):t.getDate(),n=(new Date).getFullYear();return"".concat(n,"-").concat(e,"-").concat(a)},formatDateShow:function(t){var e=t.split("-");return"".concat(e[0],"年").concat(e[1],"月").concat(e[2],"日")},onConfirmStartTime:function(t){this.startTimePop=!1,this.startDate="".concat(this.formatDateSend(t))},onConfirmEndTime:function(t){this.endTimePop=!1,this.endDate="".concat(this.formatDateSend(t))},getSelectComm:function(){this.show=!1,this.resetParams(this.startDate,this.endDate),this.commiList=[]},onRefresh:function(){var t=this;setTimeout((function(){t.commiList=[],o=0,t.isLoading=!1,t.resetParams("","")}),1e3)},resetParams:function(t,e){o=0,c=t,r=e,this.getListData(c,r)},routeItem:function(t,e){e>=0?this.$router.push({path:t,query:{id:JSON.stringify(this.commiList[e].id),date:JSON.stringify(this.commiList[e].workDate)}}):this.$router.push(t)},handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;Math.ceil(t)+e===a&&this.getListData(c,r)}},created:function(){},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll,!0)},mounted:function(){this.resetParams("",""),window.addEventListener("scroll",this.handleScroll,!0)}},d=l,u=a("2877"),m=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=m.exports}}]);